(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(16),c=n.n(r),s=n(3),u=n(2),o=n(0);function a(e){var t=e.filter,n=e.setFilter;return Object(o.jsxs)("p",{children:["Filter shown with"," ",Object(o.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})}var i=n(5),j=n.n(i),l="/api/persons";function b(e){var t=e.number,n=e.name,r=e.deletePerson;return Object(o.jsxs)("li",{children:[n," - ",t," ",Object(o.jsx)("button",{onClick:r,children:"delete"})]})}function d(e){var t=e.people,n=e.setPersons,r=function(e,t){window.confirm("Are you sure you want to delete this ".concat(t,"?"))&&(function(e){return j.a.delete("".concat(l,"/").concat(e))}(e).catch((function(e){return console.log(e)})),n((function(t){return t.filter((function(t){return e!==t.id}))})))};return Object(o.jsx)("ul",{children:t.map((function(e){return Object(o.jsx)(b,{name:e.name,number:e.number,deletePerson:function(){return r(e.id,e.name)}},e.name)}))})}var f=n(17);function h(e){var t=e.persons,n=e.setPersons,r=e.setSuccessMessage,c=e.setErrorMessage,a=Object(u.useState)(""),i=Object(s.a)(a,2),b=i[0],d=i[1],h=Object(u.useState)(""),O=Object(s.a)(h,2),m=O[0],p=O[1],v=function(e){e.preventDefault();var s,u,o=t.find((function(e){return e.name.toLowerCase()===b.toLowerCase()}));o?window.confirm("".concat(b," is already added to the phonebook, replace the old number with the new one?"))&&(s=o.id,u={name:b,number:m},j.a.put("".concat(l,"/").concat(s),u).then((function(e){return e.data}))).then((function(e){n((function(t){return t.map((function(t){return t.id!==o.id?t:e}))})),r("Updated ".concat(b," number")),setTimeout((function(){return r(null)}),5e3)})).catch((function(e){c("Person ".concat(b," was already removed from the server")),setTimeout((function(){c(null)}),5e3)})):(function(e){return j.a.post(l,e).then((function(e){return e.data}))}({name:b,number:m}).then((function(e){return n((function(t){return[].concat(Object(f.a)(t),[e])}))})),r("Added ".concat(b)),setTimeout((function(){return r(null)}),5e3));d(""),p("")};return Object(o.jsxs)("form",{onSubmit:function(e){return v(e)},children:[Object(o.jsxs)("div",{children:["name:"," ",Object(o.jsx)("input",{value:b,onChange:function(e){return d(e.target.value)}})]}),Object(o.jsxs)("div",{children:["number:"," ",Object(o.jsx)("input",{value:m,onChange:function(e){return p(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})}var O=function(e){var t=e.message,n=e.isSuccess;return null===t?null:n?Object(o.jsx)("div",{className:"notification",children:t}):Object(o.jsx)("div",{className:"error",children:t})},m=function(){var e=Object(u.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(u.useState)(""),i=Object(s.a)(c,2),b=i[0],f=i[1],m=Object(u.useState)(null),p=Object(s.a)(m,2),v=p[0],x=p[1],w=Object(u.useState)(null),g=Object(s.a)(w,2),S=g[0],C=g[1];Object(u.useEffect)((function(){j.a.get(l).then((function(e){return e.data})).then((function(e){return r(e)}))}),[]);var P=n.filter((function(e){return e.name.toLowerCase().includes(b.toLowerCase())}));return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(a,{filter:b,setFilter:f}),Object(o.jsx)(O,{message:v,isSuccess:!0}),Object(o.jsx)(O,{message:S,isSuccess:!1}),Object(o.jsx)("h2",{children:"Add a new"}),Object(o.jsx)(h,{persons:n,setPersons:r,setSuccessMessage:x,setErrorMessage:C}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(d,{people:P,setPersons:r})]})};n(41);c.a.render(Object(o.jsx)(m,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.caa19017.chunk.js.map